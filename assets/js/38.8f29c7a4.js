(window.webpackJsonp=window.webpackJsonp||[]).push([[38],{449:function(l,_,v){"use strict";v.r(_);var i=v(2),e=Object(i.a)({},(function(){var l=this,_=l._self._c;return _("ContentSlotsDistributor",{attrs:{"slot-key":l.$parent.slotKey}},[_("ul",[_("li",[_("p",[l._v("定义：基准测试是一种测量和评估软件性能指标的活动，用于建立某个时刻的性能基准，以便当系统发生软硬件变化时重新进行基准测试以评估变化对性能的影响。")])]),l._v(" "),_("li",[_("p",[l._v("基准测试与压力测试的对比")]),l._v(" "),_("ul",[_("li",[l._v("基准测试：直接、简单、易于比较，用于评估跟服务器的处理能力（基准测试可能不关心业务逻辑，所使用的查询和业务的真实性可以和业务环境没关系）")]),l._v(" "),_("li",[l._v("压力测试：对真实的业务数据进行测试，获得真实系统所能承受的压力（压力测试需要针对不同主题，所使用的数据和查询也是真实有用的）")])])]),l._v(" "),_("li",[_("p",[l._v("基准测试的目的")]),l._v(" "),_("ul",[_("li",[l._v("建立MySQL服务器的性能基准线")]),l._v(" "),_("li",[l._v("模拟比当前系统更高的负载，以找出系统的扩展瓶颈")]),l._v(" "),_("li",[l._v("测试不同的硬件、软件和操作系统配置")]),l._v(" "),_("li",[l._v("证明新的硬件设备是否配置正确")])])]),l._v(" "),_("li",[_("p",[l._v("如何进行基准测试")]),l._v(" "),_("ul",[_("li",[l._v("对整个系统进行基准测试\n"),_("ul",[_("li",[l._v("优点：能够测试整个系统的性能，包括web服务器、缓存、数据库等；能反映出系统中各个组件接口间的性能问题体现真实性能状况")]),l._v(" "),_("li",[l._v("缺点：测试设计复杂、消耗时间长")])])]),l._v(" "),_("li",[_("strong",[l._v("单独对MySQL进行基准测试")]),l._v(" "),_("ul",[_("li",[l._v("优点：测试设计简单，所需耗费时间短")]),l._v(" "),_("li",[l._v("缺点：无法全面了解整柜系统的性能基线")])])])])]),l._v(" "),_("li",[_("p",[_("strong",[l._v("MySQL基准测试的常见指标")])]),l._v(" "),_("ul",[_("li",[l._v("单位时间内所处理的事务数（TPS）")]),l._v(" "),_("li",[l._v("单位时间内所处理的查询数（QPS）")]),l._v(" "),_("li",[l._v("响应时间（平均响应时间、最小响应时间、最大响应时间、各时间所占百分比）")]),l._v(" "),_("li",[l._v("并发量：同时处理的查询请求的数量（要关注正在工作中的并发的操作数或同时工作的数量）")])])]),l._v(" "),_("li",[_("p",[_("strong",[l._v("基准测试的步骤")])]),l._v(" "),_("ul",[_("li",[l._v("1.计划和设计基准测试\n"),_("ul",[_("li",[l._v("对整个系统还是某一组件")]),l._v(" "),_("li",[l._v("使用什么样的数据")]),l._v(" "),_("li",[l._v("准备基准测试及数据收集脚本（关于CPU使用率、IO、网络流量、状态与计数器信息等）\n"),_("ul",[_("li",[_("p",[l._v("脚本Get_Test_info.sh")]),l._v(" "),_("div",{staticClass:"language-jsx extra-class"},[_("pre",{pre:!0,attrs:{class:"language-jsx"}},[_("code",[l._v("\n")])])])])])])])])])]),l._v(" "),_("li",[_("p",[l._v("基准测试中容易忽略的问题")]),l._v(" "),_("ul",[_("li",[l._v("使用生产环境数据时只使用了部分数据")]),l._v(" "),_("li",[l._v("在多用户场景中，只做单用户的测试")]),l._v(" "),_("li",[l._v("在单服务器上测试分布式应用（推荐：使用相同架构进行测试）")]),l._v(" "),_("li",[l._v("反复执行同一查询（容易缓存命中，无法反应真实查询性能）")])])]),l._v(" "),_("li",[_("p",[l._v("常用的基准测试工具介绍")]),l._v(" "),_("ul",[_("li",[_("h2",{attrs:{id:"mysqlslap"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#mysqlslap"}},[l._v("#")]),l._v(" mysqlslap")]),l._v(" "),_("ul",[_("li",[l._v("常用的参数及其说明：\n"),_("ul",[_("li",[l._v("-auto-generate-sql, -a 自动生成测试表和数据，表示用mysqlslap工具自己生成的SQL脚本来测试并发压力。")]),l._v(" "),_("li",[l._v("-auto-generate-sql-load-type=type 测试语句的类型。代表要测试的环境是读操作还是写操作还是两者混合的。取值包括：read，key，write，update和mixed(默认)。")]),l._v(" "),_("li",[l._v("-auto-generate-sql-guid-primary 增加基于GUID的主键")]),l._v(" "),_("li",[l._v("-auto-generate-sql-add-auto-increment 代表对生成的表自动添加auto_increment列，从5.1.18版本开始支持。")]),l._v(" "),_("li",[l._v("-number-char-cols=N, -x N 自动生成的测试表中包含多少个字符类型的列，默认1-number-int-cols=N, -y N 自动生成的测试表中包含多少个数字类型的列，默认1-number-of-queries=N 总的测试查询次数(并发客户数×每客户查询次数)-query=name,-q 使用自定义脚本执行测试，例如可以调用自定义的一个存储过程或者sql语句来执行测试。")]),l._v(" "),_("li",[l._v("-create-schema 代表自定义的测试库名称，测试的schema，MySQL中schema也就是database。")]),l._v(" "),_("li",[l._v("-commint=N 多少条DML后提交一次。")]),l._v(" "),_("li",[l._v("-compress, -C 如果服务器和客户端支持都压缩，则压缩信息传递。")]),l._v(" "),_("li",[l._v("-concurrency=N, -c N 表示并发量，也就是模拟多少个客户端同时执行select。可指定多个值，以逗号或者--delimiter参数指定的值做为分隔符。例如：--concurrency=100,200,500。")]),l._v(" "),_("li",[l._v("-engine=engine_name, -e engine_name 代表要测试的引擎，可以有多个，用分隔符隔开。例如：--engines=myisam,innodb。")]),l._v(" "),_("li",[l._v("-iterations=N, -i N 测试执行的迭代次数，代表要在不同并发环境下，各自运行测试多少次。")]),l._v(" "),_("li",[l._v("-only-print 只打印测试语句而不实际执行。")]),l._v(" "),_("li",[l._v("-detach=N 执行N条语句后断开重连。-debug-info, -T 打印内存和CPU的相关信息。")])])]),l._v(" "),_("li",[l._v("执行测试：\n"),_("ul",[_("li",[l._v("1.执行测试并打印测试的详细过程：mysqlslap -a -uroot -proot  --only-print\n"),_("ul",[_("li",[l._v("可以看到执行测试的过程首先是创建schema ,然后再是创建表，测试结束的时候回删除表以及删除schema")])])]),l._v(" "),_("li",[l._v("2.mysqlslap -a -uroot -proot --concurrency=50,100 --number-of-queries=100\n"),_("ul",[_("li",[l._v("分别用50和100个客户端连接去测试100条查询,")])])])])])])]),l._v(" "),_("li",[l._v("sysbench(最常用工具）")])])])])])}),[],!1,null,null,null);_.default=e.exports}}]);