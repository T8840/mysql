(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{428:function(s,a,t){"use strict";t.r(a);var r=t(2),e=Object(r.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"游标定义"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#游标定义"}},[s._v("#")]),s._v(" 游标定义")]),s._v(" "),a("p",[s._v("所谓的游标，也就是能够对结果集中的每一条记录进行定位，并对指向的记录中的数据进行操作的数据结构。")]),s._v(" "),a("p",[s._v("虽然我们也可以通过筛选条件WHERE和HAVING，或者是限定返回记录的关键字LIMIT返回\n一条记录，但是，却无法在结果集中像指针一样，向前定位一条记录、向后定位一条记录，\n或者是随意定位到某一条记录，并对记录的数据进行处理。这个时候，就可以用到游标。")]),s._v(" "),a("h2",{attrs:{id:"游标的使用步骤"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#游标的使用步骤"}},[s._v("#")]),s._v(" 游标的使用步骤")]),s._v(" "),a("p",[s._v("游标只能在存储程序内使用，存储程序包括存储过程和存储函数。")]),s._v(" "),a("p",[s._v("创建存储函数的语法是：")]),s._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CREATE")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FUNCTION")]),s._v(" 函数名称 （参数）"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("RETURNS")]),s._v(" 数据类型 程序体\n\n")])])]),a("p",[s._v("存储函数与存储过程很像，但有几个不同点：")]),s._v(" "),a("ol",[a("li",[s._v("存储函数必须返回一个值或者数据表，存储过程可以不返回。")]),s._v(" "),a("li",[s._v("存储过程可以通过CALL语句调用，存储函数不可以。")]),s._v(" "),a("li",[s._v("存储函数可以放在查询语句中使用，存储过程不行。")]),s._v(" "),a("li",[s._v("存储过程的功能更加强大，包括能够执行对表的操作（比如创建表，删除表等）和事务操作，这些功能是存储函数不具备的。")])]),s._v(" "),a("p",[s._v("在使用游标的时候，主要有4个步骤:")]),s._v(" "),a("ol",[a("li",[s._v("定义游标。")])]),s._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DECLARE")]),s._v(" 游标名 "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CURSOR")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FOR")]),s._v(" 查询语句\n")])])]),a("ol",{attrs:{start:"2"}},[a("li",[a("p",[s._v("打开游标\nOPEN 游标名称；\n打开游标之后，系统会为游标准备好查询的结果集，为后面游标的逐条读取结果集中的记录做准备。")])]),s._v(" "),a("li",[a("p",[s._v("从游标的数据结果集中读取数据"),a("br"),s._v("\n语法结构是这样的：")])])]),s._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FETCH")]),s._v(" 游标名 "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("INTO")]),s._v(" 变量列表；\n\n")])])]),a("ol",{attrs:{start:"4"}},[a("li",[s._v("关闭游标\nCLOSE 游标名")])]),s._v(" "),a("p",[s._v("用完游标之后，你一定要记住及时关闭游标。因为游标会占用系统资源，如果不及时关闭，游标会一直保持到存储过程结束，影响系统运行的效率。而关闭游标的操作，会释放游标占用的系统资源。")])])}),[],!1,null,null,null);a.default=e.exports}}]);