(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{425:function(s,t,a){"use strict";a.r(t);var n=a(2),r=Object(n.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h2",{attrs:{id:"数据库操作命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#数据库操作命令"}},[s._v("#")]),s._v(" 数据库操作命令")]),s._v(" "),t("ul",[t("li",[s._v("创建数据库 CREATE DATABASE mysql_test;")]),s._v(" "),t("li",[s._v("查看当前数据库 SHOW DATABASES;")]),s._v(" "),t("li",[s._v("删除数据库 DROP DATABASE mysql_test;")]),s._v(" "),t("li",[s._v("SHOW TABLES; # 查询所有数据表")])]),s._v(" "),t("h2",{attrs:{id:"mysql分区"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#mysql分区"}},[s._v("#")]),s._v(" MySQL分区")]),s._v(" "),t("ol",[t("li",[s._v("确认MySQL服务器是否支持分区表：SHOW PLUGINS；"),t("br"),s._v("\n其中，partition的Status为ACTIVE；")]),s._v(" "),t("li",[s._v("MySQL分区种类：")])]),s._v(" "),t("ul",[t("li",[s._v("按HASH分区\n根据MOD（分区键，分区数）的值把数据存储行存储到表的不同分区中。数据可以平均的分布在各个分区中。")])]),s._v(" "),t("div",{staticClass:"language-sql extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("PARTITION")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BY")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("HASH")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("customer_id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    PARTITIONS "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 时间处理")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("PARTITION")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BY")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("HASH")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("UNIX_TIMESTAMP"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("login_time"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    PARTITIONS "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),t("ul",[t("li",[s._v("按范围分区"),t("br"),s._v("\n根据分区键值的范围把数据行存储到表的不同分区中；\n多个分区的范围要连续，但是不能重叠；\n默认情况下使用VALUES LESS THAN属性，即每个分区不包括指定的那个值。")])]),s._v(" "),t("div",{staticClass:"language-sql extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("PARTITION")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BY")]),s._v(" RANGE"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("customer_id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("PARTITION")]),s._v(" p0 "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("VALUES")]),s._v(" LESS THAN "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10000")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("PARTITION")]),s._v(" p1 "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("VALUES")]),s._v(" LESS THAN "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("20000")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("PARTITION")]),s._v(" p2 "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("VALUES")]),s._v(" LESS THAN "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("30000")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("PARTITION")]),s._v(" p3 "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("VALUES")]),s._v(" LESS THAN MAXVALUE\n")])])]),t("p",[s._v("适用场景：分区键为日期或是时间类型；所有查询中都包括分区键；定期按分区范围清理历史数据。")]),s._v(" "),t("ul",[t("li",[s._v("按LIST分区"),t("br"),s._v("\n按分区键取值的列表进行分区；"),t("br"),s._v("\n同范围分区一样，各分区的列表值不能重复；"),t("br"),s._v("\n每一行数据必须能找到对应的分区列表，否则数据插入失败。")])]),s._v(" "),t("div",{staticClass:"language-sql extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("PARTITION")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BY")]),s._v(" LIST"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("login_type"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("PARTITION")]),s._v(" p0 "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("VALUES")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("in")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("9")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("PARTITION")]),s._v(" p1 "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("VALUES")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("in")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])])]),t("ol",{attrs:{start:"3"}},[t("li",[s._v("使用分区表的注意事项")])]),s._v(" "),t("ul",[t("li",[s._v("结合业务场景选择分区键，避免跨分区查询；")]),s._v(" "),t("li",[s._v("对分区表进行查询最好在WHERE从句中包含分区键")]),s._v(" "),t("li",[s._v("具有主键或唯一索引的表，主键或唯一索引必须是分区键的一部分")])]),s._v(" "),t("h2",{attrs:{id:"导入sql文件进行数据恢复"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#导入sql文件进行数据恢复"}},[s._v("#")]),s._v(" 导入sql文件进行数据恢复")]),s._v(" "),t("ul",[t("li",[s._v("第一种方式，使用“mysql”命令行客户端工具，进行数据恢复的命令")])]),s._v(" "),t("div",{staticClass:"language-sql extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[s._v("H:\\"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("mysql "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("u root "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("p demo "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v(" test"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("sql")]),s._v("\nEnter password: "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("\n")])])]),t("ul",[t("li",[s._v("第二种方式，使用“SOURCE”语句恢复数据")])]),s._v(" "),t("div",{staticClass:"language-sql extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("use")]),s._v(" db"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nsource D:\\Demo"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("sql")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),t("h2",{attrs:{id:"数据备份"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#数据备份"}},[s._v("#")]),s._v(" 数据备份")]),s._v(" "),t("p",[s._v("MySQL的数据备份有2种，一种是物理备份，通过把数据文件复制出来，达到备份的目的；另外一种是逻辑备份，通过把描述数据库结构和内容的信息保存起来，达到备份的目的。逻辑备份这种方式是免费的，广泛得到使用；而物理备份的方式需要收费，用得比较少。重点是逻辑备份。")]),s._v(" "),t("p",[s._v("用于数据备份的工具mysqldump。它总共有三种模式：")]),s._v(" "),t("ol",[t("li",[s._v("备份数据库中的表；")]),s._v(" "),t("li",[s._v("备份整个数据库；")]),s._v(" "),t("li",[s._v("备份整个数据库服务器")])]),s._v(" "),t("h3",{attrs:{id:"备份数据库"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#备份数据库"}},[s._v("#")]),s._v(" 备份数据库")]),s._v(" "),t("p",[s._v("mysqldump备份数据库的语法结构是：")]),s._v(" "),t("div",{staticClass:"language-sql extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[s._v("mysqldump "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("h 服务器 "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("u 用户 "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("p 密码 "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--databases 数据库名称 … > 备份文件名")]),s._v("\n")])])]),t("h3",{attrs:{id:"备份数据库中的表"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#备份数据库中的表"}},[s._v("#")]),s._v(" 备份数据库中的表")]),s._v(" "),t("p",[s._v("mysqldump备份数据库中的表的语法结构是：")]),s._v(" "),t("div",{staticClass:"language-sql extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[s._v("mysqldump "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("h 服务器 "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("u 用户 "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("p 密码 数据库名称 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("表名称 … "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" 备份文件名称\n")])])]),t("h3",{attrs:{id:"备份整个数据库服务器"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#备份整个数据库服务器"}},[s._v("#")]),s._v(" 备份整个数据库服务器")]),s._v(" "),t("p",[s._v("mysqldump备份整个数据库服务器的语法结构是：")]),s._v(" "),t("div",{staticClass:"language-sql extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[s._v("mysqldump "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("h 服务器 "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("u 用户 "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("p 密码 "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--all-databases > 备份文件名")]),s._v("\n")])])])])}),[],!1,null,null,null);t.default=r.exports}}]);